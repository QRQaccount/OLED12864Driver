#include "OLED12864.h"

#define OLED_GPIO_Init()                                                                               \
    GPIO_InitTypeDef GPIO_InitStruct = {0};                                                            \
    __HAL_RCC_GPIOA_CLK_ENABLE();                                                                      \
    HAL_GPIO_WritePin(OLED_CLK_Port, OLED_CLK_GPIO_Pin, GPIO_PIN_RESET);                               \
    HAL_GPIO_WritePin(OLED_DC_Port, OLED_DC_GPIO_Pin, GPIO_PIN_RESET);                                 \
    HAL_GPIO_WritePin(OLED_DI_Port, OLED_DI_GPIO_Pin, GPIO_PIN_RESET);                                 \
    HAL_GPIO_WritePin(OLED_RST_Port, OLED_RST_GPIO_Pin, GPIO_PIN_RESET);                               \
    GPIO_InitStruct.Pin = OLED_CLK_GPIO_Pin | OLED_DC_GPIO_Pin | OLED_DI_GPIO_Pin | OLED_RST_GPIO_Pin; \
    GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;                                                        \
    GPIO_InitStruct.Pull = GPIO_NOPULL;                                                                \
    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_MEDIUM;                                                    \
    HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);

#define OLED_DC_High() HAL_GPIO_WritePin(OLED_DC_Port, OLED_DC_GPIO_Pin, GPIO_PIN_SET)
#define OLED_DC_Low() HAL_GPIO_WritePin(OLED_DC_Port, OLED_DC_GPIO_Pin, GPIO_PIN_RESET)
#define OLED_DI_High() HAL_GPIO_WritePin(OLED_DI_Port, OLED_DI_GPIO_Pin, GPIO_PIN_SET)
#define OLED_DI_Low() HAL_GPIO_WritePin(OLED_DI_Port, OLED_DI_GPIO_Pin, GPIO_PIN_RESET)
#define OLED_RST_High() HAL_GPIO_WritePin(OLED_RST_Port, OLED_RST_GPIO_Pin, GPIO_PIN_SET)
#define OLED_RST_Low() HAL_GPIO_WritePin(OLED_RST_Port, OLED_RST_GPIO_Pin, GPIO_PIN_RESET)
#define OLED_CLK_High() HAL_GPIO_WritePin(OLED_CLK_Port, OLED_CLK_GPIO_Pin, GPIO_PIN_SET)
#define OLED_CLK_Low() HAL_GPIO_WritePin(OLED_CLK_Port, OLED_CLK_GPIO_Pin, GPIO_PIN_RESET)

// ms级延时
#define OLED_CLK_Delay_ms(x) HAL_Delay(x)

// 该语句宏仅用于CLK信号的延时
// 需要更加精细的控制请自行更换延时函数
#define OLED_CLK_Delay asm("nop")

#define X_WIDTH 128 // x轴宽度
#define Y_HEIGHT 64 // y轴高度

// 大小为6*8的字符
const unsigned char ascii_6x8[][6] =
    {
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // sp
        {0x00, 0x00, 0x00, 0x2f, 0x00, 0x00}, // !
        {0x00, 0x00, 0x07, 0x00, 0x07, 0x00}, // "
        {0x00, 0x14, 0x7f, 0x14, 0x7f, 0x14}, // #
        {0x00, 0x24, 0x2a, 0x7f, 0x2a, 0x12}, // $
        {0x00, 0x62, 0x64, 0x08, 0x13, 0x23}, // %
        {0x00, 0x36, 0x49, 0x55, 0x22, 0x50}, // &
        {0x00, 0x00, 0x05, 0x03, 0x00, 0x00}, // '
        {0x00, 0x00, 0x1c, 0x22, 0x41, 0x00}, // (
        {0x00, 0x00, 0x41, 0x22, 0x1c, 0x00}, // )
        {0x00, 0x14, 0x08, 0x3E, 0x08, 0x14}, // *
        {0x00, 0x08, 0x08, 0x3E, 0x08, 0x08}, // +
        {0x00, 0x00, 0x00, 0xA0, 0x60, 0x00}, // ,
        {0x00, 0x08, 0x08, 0x08, 0x08, 0x08}, // -
        {0x00, 0x00, 0x60, 0x60, 0x00, 0x00}, // .
        {0x00, 0x20, 0x10, 0x08, 0x04, 0x02}, // /
        {0x00, 0x3E, 0x51, 0x49, 0x45, 0x3E}, // 0
        {0x00, 0x00, 0x42, 0x7F, 0x40, 0x00}, // 1
        {0x00, 0x42, 0x61, 0x51, 0x49, 0x46}, // 2
        {0x00, 0x21, 0x41, 0x45, 0x4B, 0x31}, // 3
        {0x00, 0x18, 0x14, 0x12, 0x7F, 0x10}, // 4
        {0x00, 0x27, 0x45, 0x45, 0x45, 0x39}, // 5
        {0x00, 0x3C, 0x4A, 0x49, 0x49, 0x30}, // 6
        {0x00, 0x01, 0x71, 0x09, 0x05, 0x03}, // 7
        {0x00, 0x36, 0x49, 0x49, 0x49, 0x36}, // 8
        {0x00, 0x06, 0x49, 0x49, 0x29, 0x1E}, // 9
        {0x00, 0x00, 0x36, 0x36, 0x00, 0x00}, // :
        {0x00, 0x00, 0x56, 0x36, 0x00, 0x00}, // ;
        {0x00, 0x08, 0x14, 0x22, 0x41, 0x00}, // <
        {0x00, 0x14, 0x14, 0x14, 0x14, 0x14}, // =
        {0x00, 0x00, 0x41, 0x22, 0x14, 0x08}, // >
        {0x00, 0x02, 0x01, 0x51, 0x09, 0x06}, // ?
        {0x00, 0x32, 0x49, 0x59, 0x51, 0x3E}, // @
        {0x00, 0x7C, 0x12, 0x11, 0x12, 0x7C}, // A
        {0x00, 0x7F, 0x49, 0x49, 0x49, 0x36}, // B
        {0x00, 0x3E, 0x41, 0x41, 0x41, 0x22}, // C
        {0x00, 0x7F, 0x41, 0x41, 0x22, 0x1C}, // D
        {0x00, 0x7F, 0x49, 0x49, 0x49, 0x41}, // E
        {0x00, 0x7F, 0x09, 0x09, 0x09, 0x01}, // F
        {0x00, 0x3E, 0x41, 0x49, 0x49, 0x7A}, // G
        {0x00, 0x7F, 0x08, 0x08, 0x08, 0x7F}, // H
        {0x00, 0x00, 0x41, 0x7F, 0x41, 0x00}, // I
        {0x00, 0x20, 0x40, 0x41, 0x3F, 0x01}, // J
        {0x00, 0x7F, 0x08, 0x14, 0x22, 0x41}, // K
        {0x00, 0x7F, 0x40, 0x40, 0x40, 0x40}, // L
        {0x00, 0x7F, 0x02, 0x0C, 0x02, 0x7F}, // M
        {0x00, 0x7F, 0x04, 0x08, 0x10, 0x7F}, // N
        {0x00, 0x3E, 0x41, 0x41, 0x41, 0x3E}, // O
        {0x00, 0x7F, 0x09, 0x09, 0x09, 0x06}, // P
        {0x00, 0x3E, 0x41, 0x51, 0x21, 0x5E}, // Q
        {0x00, 0x7F, 0x09, 0x19, 0x29, 0x46}, // R
        {0x00, 0x46, 0x49, 0x49, 0x49, 0x31}, // S
        {0x00, 0x01, 0x01, 0x7F, 0x01, 0x01}, // T
        {0x00, 0x3F, 0x40, 0x40, 0x40, 0x3F}, // U
        {0x00, 0x1F, 0x20, 0x40, 0x20, 0x1F}, // V
        {0x00, 0x3F, 0x40, 0x38, 0x40, 0x3F}, // W
        {0x00, 0x63, 0x14, 0x08, 0x14, 0x63}, // X
        {0x00, 0x07, 0x08, 0x70, 0x08, 0x07}, // Y
        {0x00, 0x61, 0x51, 0x49, 0x45, 0x43}, // Z
        {0x00, 0x00, 0x7F, 0x41, 0x41, 0x00}, // [
        {0x00, 0x55, 0x2A, 0x55, 0x2A, 0x55}, // 55
        {0x00, 0x00, 0x41, 0x41, 0x7F, 0x00}, // ]
        {0x00, 0x04, 0x02, 0x01, 0x02, 0x04}, // ^
        {0x00, 0x40, 0x40, 0x40, 0x40, 0x40}, // _
        {0x00, 0x00, 0x01, 0x02, 0x04, 0x00}, // '
        {0x00, 0x20, 0x54, 0x54, 0x54, 0x78}, // a
        {0x00, 0x7F, 0x48, 0x44, 0x44, 0x38}, // b
        {0x00, 0x38, 0x44, 0x44, 0x44, 0x20}, // c
        {0x00, 0x38, 0x44, 0x44, 0x48, 0x7F}, // d
        {0x00, 0x38, 0x54, 0x54, 0x54, 0x18}, // e
        {0x00, 0x08, 0x7E, 0x09, 0x01, 0x02}, // f
        {0x00, 0x18, 0xA4, 0xA4, 0xA4, 0x7C}, // g
        {0x00, 0x7F, 0x08, 0x04, 0x04, 0x78}, // h
        {0x00, 0x00, 0x44, 0x7D, 0x40, 0x00}, // i
        {0x00, 0x40, 0x80, 0x84, 0x7D, 0x00}, // j
        {0x00, 0x7F, 0x10, 0x28, 0x44, 0x00}, // k
        {0x00, 0x00, 0x41, 0x7F, 0x40, 0x00}, // l
        {0x00, 0x7C, 0x04, 0x18, 0x04, 0x78}, // m
        {0x00, 0x7C, 0x08, 0x04, 0x04, 0x78}, // n
        {0x00, 0x38, 0x44, 0x44, 0x44, 0x38}, // o
        {0x00, 0xFC, 0x24, 0x24, 0x24, 0x18}, // p
        {0x00, 0x18, 0x24, 0x24, 0x18, 0xFC}, // q
        {0x00, 0x7C, 0x08, 0x04, 0x04, 0x08}, // r
        {0x00, 0x48, 0x54, 0x54, 0x54, 0x20}, // s
        {0x00, 0x04, 0x3F, 0x44, 0x40, 0x20}, // t
        {0x00, 0x3C, 0x40, 0x40, 0x20, 0x7C}, // u
        {0x00, 0x1C, 0x20, 0x40, 0x20, 0x1C}, // v
        {0x00, 0x3C, 0x40, 0x30, 0x40, 0x3C}, // w
        {0x00, 0x44, 0x28, 0x10, 0x28, 0x44}, // x
        {0x00, 0x1C, 0xA0, 0xA0, 0xA0, 0x7C}, // y
        {0x00, 0x44, 0x64, 0x54, 0x4C, 0x44}, // z
        {0x14, 0x14, 0x14, 0x14, 0x14, 0x14}  // horiz lines
};

// 大小为8*16的字符
const unsigned char ascii_8X16[][16] =
    {
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // 0
        {0x00, 0x00, 0x00, 0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x33, 0x30, 0x00, 0x00, 0x00}, //!1
        {0x00, 0x10, 0x0C, 0x06, 0x10, 0x0C, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, //"2
        {0x40, 0xC0, 0x78, 0x40, 0xC0, 0x78, 0x40, 0x00, 0x04, 0x3F, 0x04, 0x04, 0x3F, 0x04, 0x04, 0x00}, //#3
        {0x00, 0x70, 0x88, 0xFC, 0x08, 0x30, 0x00, 0x00, 0x00, 0x18, 0x20, 0xFF, 0x21, 0x1E, 0x00, 0x00}, //$4
        {0xF0, 0x08, 0xF0, 0x00, 0xE0, 0x18, 0x00, 0x00, 0x00, 0x21, 0x1C, 0x03, 0x1E, 0x21, 0x1E, 0x00}, //%5
        {0x00, 0xF0, 0x08, 0x88, 0x70, 0x00, 0x00, 0x00, 0x1E, 0x21, 0x23, 0x24, 0x19, 0x27, 0x21, 0x10}, //&6
        {0x10, 0x16, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, //'7
        {0x00, 0x00, 0x00, 0xE0, 0x18, 0x04, 0x02, 0x00, 0x00, 0x00, 0x00, 0x07, 0x18, 0x20, 0x40, 0x00}, //(8
        {0x00, 0x02, 0x04, 0x18, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x40, 0x20, 0x18, 0x07, 0x00, 0x00, 0x00}, //)9
        {0x40, 0x40, 0x80, 0xF0, 0x80, 0x40, 0x40, 0x00, 0x02, 0x02, 0x01, 0x0F, 0x01, 0x02, 0x02, 0x00}, //*10
        {0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x1F, 0x01, 0x01, 0x01, 0x00}, //+11
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xB0, 0x70, 0x00, 0x00, 0x00, 0x00, 0x00}, //,12
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01}, //-13
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00}, //.14
        {0x00, 0x00, 0x00, 0x00, 0x80, 0x60, 0x18, 0x04, 0x00, 0x60, 0x18, 0x06, 0x01, 0x00, 0x00, 0x00}, ///15
        {0x00, 0xE0, 0x10, 0x08, 0x08, 0x10, 0xE0, 0x00, 0x00, 0x0F, 0x10, 0x20, 0x20, 0x10, 0x0F, 0x00}, //016
        {0x00, 0x10, 0x10, 0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x20, 0x3F, 0x20, 0x20, 0x00, 0x00}, //117
        {0x00, 0x70, 0x08, 0x08, 0x08, 0x88, 0x70, 0x00, 0x00, 0x30, 0x28, 0x24, 0x22, 0x21, 0x30, 0x00}, //218
        {0x00, 0x30, 0x08, 0x88, 0x88, 0x48, 0x30, 0x00, 0x00, 0x18, 0x20, 0x20, 0x20, 0x11, 0x0E, 0x00}, //319
        {0x00, 0x00, 0xC0, 0x20, 0x10, 0xF8, 0x00, 0x00, 0x00, 0x07, 0x04, 0x24, 0x24, 0x3F, 0x24, 0x00}, //420
        {0x00, 0xF8, 0x08, 0x88, 0x88, 0x08, 0x08, 0x00, 0x00, 0x19, 0x21, 0x20, 0x20, 0x11, 0x0E, 0x00}, //521
        {0x00, 0xE0, 0x10, 0x88, 0x88, 0x18, 0x00, 0x00, 0x00, 0x0F, 0x11, 0x20, 0x20, 0x11, 0x0E, 0x00}, //622
        {0x00, 0x38, 0x08, 0x08, 0xC8, 0x38, 0x08, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00, 0x00}, //723
        {0x00, 0x70, 0x88, 0x08, 0x08, 0x88, 0x70, 0x00, 0x00, 0x1C, 0x22, 0x21, 0x21, 0x22, 0x1C, 0x00}, //824
        {0x00, 0xE0, 0x10, 0x08, 0x08, 0x10, 0xE0, 0x00, 0x00, 0x00, 0x31, 0x22, 0x22, 0x11, 0x0F, 0x00}, //925
        {0x00, 0x00, 0x00, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x30, 0x00, 0x00, 0x00}, //:26
        {0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x60, 0x00, 0x00, 0x00, 0x00}, //;27
        {0x00, 0x00, 0x80, 0x40, 0x20, 0x10, 0x08, 0x00, 0x00, 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x00}, //<28
        {0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x00, 0x04, 0x04, 0x04, 0x04, 0x04, 0x04, 0x04, 0x00}, //=29
        {0x00, 0x08, 0x10, 0x20, 0x40, 0x80, 0x00, 0x00, 0x00, 0x20, 0x10, 0x08, 0x04, 0x02, 0x01, 0x00}, //>30
        {0x00, 0x70, 0x48, 0x08, 0x08, 0x08, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x30, 0x36, 0x01, 0x00, 0x00}, //?31
        {0xC0, 0x30, 0xC8, 0x28, 0xE8, 0x10, 0xE0, 0x00, 0x07, 0x18, 0x27, 0x24, 0x23, 0x14, 0x0B, 0x00}, //@32
        {0x00, 0x00, 0xC0, 0x38, 0xE0, 0x00, 0x00, 0x00, 0x20, 0x3C, 0x23, 0x02, 0x02, 0x27, 0x38, 0x20}, //A33
        {0x08, 0xF8, 0x88, 0x88, 0x88, 0x70, 0x00, 0x00, 0x20, 0x3F, 0x20, 0x20, 0x20, 0x11, 0x0E, 0x00}, //B34
        {0xC0, 0x30, 0x08, 0x08, 0x08, 0x08, 0x38, 0x00, 0x07, 0x18, 0x20, 0x20, 0x20, 0x10, 0x08, 0x00}, //C35
        {0x08, 0xF8, 0x08, 0x08, 0x08, 0x10, 0xE0, 0x00, 0x20, 0x3F, 0x20, 0x20, 0x20, 0x10, 0x0F, 0x00}, //D36
        {0x08, 0xF8, 0x88, 0x88, 0xE8, 0x08, 0x10, 0x00, 0x20, 0x3F, 0x20, 0x20, 0x23, 0x20, 0x18, 0x00}, //E37
        {0x08, 0xF8, 0x88, 0x88, 0xE8, 0x08, 0x10, 0x00, 0x20, 0x3F, 0x20, 0x00, 0x03, 0x00, 0x00, 0x00}, //F38
        {0xC0, 0x30, 0x08, 0x08, 0x08, 0x38, 0x00, 0x00, 0x07, 0x18, 0x20, 0x20, 0x22, 0x1E, 0x02, 0x00}, //G39
        {0x08, 0xF8, 0x08, 0x00, 0x00, 0x08, 0xF8, 0x08, 0x20, 0x3F, 0x21, 0x01, 0x01, 0x21, 0x3F, 0x20}, //H40
        {0x00, 0x08, 0x08, 0xF8, 0x08, 0x08, 0x00, 0x00, 0x00, 0x20, 0x20, 0x3F, 0x20, 0x20, 0x00, 0x00}, //I41
        {0x00, 0x00, 0x08, 0x08, 0xF8, 0x08, 0x08, 0x00, 0xC0, 0x80, 0x80, 0x80, 0x7F, 0x00, 0x00, 0x00}, //J42
        {0x08, 0xF8, 0x88, 0xC0, 0x28, 0x18, 0x08, 0x00, 0x20, 0x3F, 0x20, 0x01, 0x26, 0x38, 0x20, 0x00}, //K43
        {0x08, 0xF8, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x3F, 0x20, 0x20, 0x20, 0x20, 0x30, 0x00}, //L44
        {0x08, 0xF8, 0xF8, 0x00, 0xF8, 0xF8, 0x08, 0x00, 0x20, 0x3F, 0x00, 0x3F, 0x00, 0x3F, 0x20, 0x00}, //M45
        {0x08, 0xF8, 0x30, 0xC0, 0x00, 0x08, 0xF8, 0x08, 0x20, 0x3F, 0x20, 0x00, 0x07, 0x18, 0x3F, 0x00}, //N46
        {0xE0, 0x10, 0x08, 0x08, 0x08, 0x10, 0xE0, 0x00, 0x0F, 0x10, 0x20, 0x20, 0x20, 0x10, 0x0F, 0x00}, //O47
        {0x08, 0xF8, 0x08, 0x08, 0x08, 0x08, 0xF0, 0x00, 0x20, 0x3F, 0x21, 0x01, 0x01, 0x01, 0x00, 0x00}, //P48
        {0xE0, 0x10, 0x08, 0x08, 0x08, 0x10, 0xE0, 0x00, 0x0F, 0x18, 0x24, 0x24, 0x38, 0x50, 0x4F, 0x00}, //Q49
        {0x08, 0xF8, 0x88, 0x88, 0x88, 0x88, 0x70, 0x00, 0x20, 0x3F, 0x20, 0x00, 0x03, 0x0C, 0x30, 0x20}, //R50
        {0x00, 0x70, 0x88, 0x08, 0x08, 0x08, 0x38, 0x00, 0x00, 0x38, 0x20, 0x21, 0x21, 0x22, 0x1C, 0x00}, //S51
        {0x18, 0x08, 0x08, 0xF8, 0x08, 0x08, 0x18, 0x00, 0x00, 0x00, 0x20, 0x3F, 0x20, 0x00, 0x00, 0x00}, //T52
        {0x08, 0xF8, 0x08, 0x00, 0x00, 0x08, 0xF8, 0x08, 0x00, 0x1F, 0x20, 0x20, 0x20, 0x20, 0x1F, 0x00}, //U53
        {0x08, 0x78, 0x88, 0x00, 0x00, 0xC8, 0x38, 0x08, 0x00, 0x00, 0x07, 0x38, 0x0E, 0x01, 0x00, 0x00}, //V54
        {0xF8, 0x08, 0x00, 0xF8, 0x00, 0x08, 0xF8, 0x00, 0x03, 0x3C, 0x07, 0x00, 0x07, 0x3C, 0x03, 0x00}, //W55
        {0x08, 0x18, 0x68, 0x80, 0x80, 0x68, 0x18, 0x08, 0x20, 0x30, 0x2C, 0x03, 0x03, 0x2C, 0x30, 0x20}, //X56
        {0x08, 0x38, 0xC8, 0x00, 0xC8, 0x38, 0x08, 0x00, 0x00, 0x00, 0x20, 0x3F, 0x20, 0x00, 0x00, 0x00}, //Y57
        {0x10, 0x08, 0x08, 0x08, 0xC8, 0x38, 0x08, 0x00, 0x20, 0x38, 0x26, 0x21, 0x20, 0x20, 0x18, 0x00}, //Z58
        {0x00, 0x00, 0x00, 0xFE, 0x02, 0x02, 0x02, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x40, 0x40, 0x40, 0x00}, //[59
        {0x00, 0x0C, 0x30, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x06, 0x38, 0xC0, 0x00}, //\60
        {0x00, 0x02, 0x02, 0x02, 0xFE, 0x00, 0x00, 0x00, 0x00, 0x40, 0x40, 0x40, 0x7F, 0x00, 0x00, 0x00}, //]61
        {0x00, 0x00, 0x04, 0x02, 0x02, 0x02, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, //^62
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80}, //_63
        {0x00, 0x02, 0x02, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, //`64
        {0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x19, 0x24, 0x22, 0x22, 0x22, 0x3F, 0x20}, //a65
        {0x08, 0xF8, 0x00, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x11, 0x20, 0x20, 0x11, 0x0E, 0x00}, //b66
        {0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x0E, 0x11, 0x20, 0x20, 0x20, 0x11, 0x00}, //c67
        {0x00, 0x00, 0x00, 0x80, 0x80, 0x88, 0xF8, 0x00, 0x00, 0x0E, 0x11, 0x20, 0x20, 0x10, 0x3F, 0x20}, //d68
        {0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x1F, 0x22, 0x22, 0x22, 0x22, 0x13, 0x00}, //e69
        {0x00, 0x80, 0x80, 0xF0, 0x88, 0x88, 0x88, 0x18, 0x00, 0x20, 0x20, 0x3F, 0x20, 0x20, 0x00, 0x00}, //f70
        {0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x6B, 0x94, 0x94, 0x94, 0x93, 0x60, 0x00}, //g71
        {0x08, 0xF8, 0x00, 0x80, 0x80, 0x80, 0x00, 0x00, 0x20, 0x3F, 0x21, 0x00, 0x00, 0x20, 0x3F, 0x20}, //h72
        {0x00, 0x80, 0x98, 0x98, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x20, 0x3F, 0x20, 0x20, 0x00, 0x00}, //i73
        {0x00, 0x00, 0x00, 0x80, 0x98, 0x98, 0x00, 0x00, 0x00, 0xC0, 0x80, 0x80, 0x80, 0x7F, 0x00, 0x00}, //j74
        {0x08, 0xF8, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0x20, 0x3F, 0x24, 0x02, 0x2D, 0x30, 0x20, 0x00}, //k75
        {0x00, 0x08, 0x08, 0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x20, 0x3F, 0x20, 0x20, 0x00, 0x00}, //l76
        {0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x20, 0x3F, 0x20, 0x00, 0x3F, 0x20, 0x00, 0x3F}, //m77
        {0x80, 0x80, 0x00, 0x80, 0x80, 0x80, 0x00, 0x00, 0x20, 0x3F, 0x21, 0x00, 0x00, 0x20, 0x3F, 0x20}, //n78
        {0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x1F, 0x20, 0x20, 0x20, 0x20, 0x1F, 0x00}, //o79
        {0x80, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x00, 0x80, 0xFF, 0xA1, 0x20, 0x20, 0x11, 0x0E, 0x00}, //p80
        {0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x0E, 0x11, 0x20, 0x20, 0xA0, 0xFF, 0x80}, //q81
        {0x80, 0x80, 0x80, 0x00, 0x80, 0x80, 0x80, 0x00, 0x20, 0x20, 0x3F, 0x21, 0x20, 0x00, 0x01, 0x00}, //r82
        {0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x33, 0x24, 0x24, 0x24, 0x24, 0x19, 0x00}, //s83
        {0x00, 0x80, 0x80, 0xE0, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0x20, 0x20, 0x00, 0x00}, //t84
        {0x80, 0x80, 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x00, 0x1F, 0x20, 0x20, 0x20, 0x10, 0x3F, 0x20}, //u85
        {0x80, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0x01, 0x0E, 0x30, 0x08, 0x06, 0x01, 0x00}, //v86
        {0x80, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x80, 0x0F, 0x30, 0x0C, 0x03, 0x0C, 0x30, 0x0F, 0x00}, //w87
        {0x00, 0x80, 0x80, 0x00, 0x80, 0x80, 0x80, 0x00, 0x00, 0x20, 0x31, 0x2E, 0x0E, 0x31, 0x20, 0x00}, //x88
        {0x80, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x81, 0x8E, 0x70, 0x18, 0x06, 0x01, 0x00}, //y89
        {0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x21, 0x30, 0x2C, 0x22, 0x21, 0x30, 0x00}, //z90
        {0x00, 0x00, 0x00, 0x00, 0x80, 0x7C, 0x02, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x40, 0x40}, //{91
        {0x00, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x00}, //|92
        {0x00, 0x02, 0x02, 0x7C, 0x80, 0x00, 0x00, 0x00, 0x00, 0x40, 0x40, 0x3F, 0x00, 0x00, 0x00, 0x00}, //}93
        {0x00, 0x06, 0x01, 0x01, 0x02, 0x02, 0x04, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, //~94

};

#if USE_IMAGE_MANAGE == 1
unsigned char OLED_Image[8][128] = {0};

/**
 * 
 * 设置图形中(x,y)点的值
 * @param value 需要设置的值 0 1
 * @param x x轴坐标
 * @param y y轴坐标
 * @return 被修改后页的值
*/
uint8_t OLED_Set_Value(uint8_t value, uint8_t x, uint8_t y)
{
    uint8_t page_value = OLED_Image[y >> 3][x];
    uint8_t __y = y % 8;
    if (value > 1)
    {
        page_value = page_value | (0x01 << (8 - __y));
    }
    else
    {
        page_value = page_value & (0x7f >> (__y - 1));
    }
    OLED_Image[y >> 3][x] = page_value;
    return page_value;
}

/**
 * 
 * 取出图像数组中(x,y)的值
 * @param x x轴坐标
 * @param y y轴坐标
 * @return 返回uint8_t的值
*/
uint8_t OLED_Get_Value(uint8_t x, uint8_t y)
{
    uint8_t page_value = OLED_Image[y >> 3][x];
    uint8_t __y = y % 8;
    if (page_value & (0x01 << (8 - __y)))
    {
        return 1;
    }
    else
    {
        return 0;
    }
}

void OLED_Set_Page(uint8_t value, uint8_t x, uint8_t page)
{
    OLED_Image[page][x] = value;
}

uint8_t OLED_Get_Page(uint8_t x, uint8_t page)
{
    return OLED_Image[page][x];
}
#endif

/**
 * 
 * 写入数据
 * @param data 数据
*/
void OLED_Write_Data(unsigned char data)
{
    // 字长
    uint8_t word = 8;
    OLED_DC_High();
    OLED_CLK_Delay;
    OLED_CLK_Low();
    OLED_CLK_Delay;
    while (word--)
    {
        if (data & 0x80)
        {
            OLED_DI_High();
        }
        else
        {
            OLED_DI_Low();
        }
        OLED_CLK_High();
        for (uint8_t i = 0; i < 1; i++)
        {
            OLED_CLK_Delay;
        }
        OLED_CLK_Low();
        OLED_CLK_Delay;
        data <<= 1;
    }
}

/**
 * 
 * 写入命令
 * @param cmd 命令
*/
void OLED_Write_Cmd(unsigned char cmd)
{
    uint8_t word = 8;
    OLED_DC_Low();
    OLED_CLK_Delay;
    OLED_CLK_Low();
    OLED_CLK_Delay;
    while (word--)
    {
        if (cmd & 0x80)
        {
            OLED_DI_High();
        }
        else
        {
            OLED_DI_Low();
            OLED_CLK_Delay;
        }
        OLED_CLK_High();
        for (uint8_t i = 0; i < 1; i++)
        {
            OLED_CLK_Delay;
        }
        OLED_CLK_Low();
        OLED_CLK_Delay;
        cmd <<= 1;
        OLED_CLK_Delay;
    }
}

/** 
 * 设置此时指向的块
 * @param x 此时的x轴位置 (0,128)
 * @param page  一页大小为8像素 范围(0,7)
*/
void OLED_Set_Pointer(uint8_t x, uint8_t page)
{
    OLED_Write_Cmd(0xb0 + page);
    OLED_Write_Cmd((x & 0xf0) >> 4 | 0x10);
    OLED_Write_Cmd((x & 0x0f) | 0x01);
}

void OLED_Fill(unsigned char data)
{
    uint8_t x, y;
    for (y = 0; y < 8; y++)
    {
        OLED_Write_Cmd(0xb0 + y);
        OLED_Write_Cmd(0x01);
        OLED_Write_Cmd(0x10);
        for (x = 0; x < X_WIDTH; x++)
        {

            OLED_Write_Data(data);
        }
    }
}

void OLED_Init(void)
{
    OLED_GPIO_Init();
    OLED_CLK_High();
    OLED_RST_Low();
    OLED_CLK_Delay_ms(50);
    OLED_RST_High();

    OLED_Write_Cmd(0xae); // 关闭控制
    OLED_Write_Cmd(0x00); // 设置低列位置
    OLED_Write_Cmd(0x10); // 设置高列位置
    OLED_Write_Cmd(0x40); // 设置初始行位置
    OLED_Write_Cmd(0x81); // 设置对比度控制寄存器
    OLED_Write_Cmd(0xcf); // Set SEG Output Current Brightness
    OLED_Write_Cmd(0xa1); //--Set SEG/Column Mapping     0xa0左右反置 0xa1正常
    OLED_Write_Cmd(0xc8); //Set COM/Row Scan Direction   0xc0上下反置 0xc8正常
    OLED_Write_Cmd(0xa6); //--set normal display
    OLED_Write_Cmd(0xa8); //--set multiplex ratio(1 to 64)
    OLED_Write_Cmd(0x3f); //--1/64 duty
    OLED_Write_Cmd(0xd3); //-set display offset	Shift Mapping RAM Counter (0x00~0x3F)
    OLED_Write_Cmd(0x00); //-not offset
    OLED_Write_Cmd(0xd5); //--set display clock divide ratio/oscillator frequency
    OLED_Write_Cmd(0x80); //--set divide ratio, Set Clock as 100 Frames/Sec
    OLED_Write_Cmd(0xd9); //--set pre-charge period
    OLED_Write_Cmd(0xf1); //Set Pre-Charge as 15 Clocks & Discharge as 1 Clock
    OLED_Write_Cmd(0xda); //--set com pins hardware configuration
    OLED_Write_Cmd(0x12);
    OLED_Write_Cmd(0xdb); //--set vcomh
    OLED_Write_Cmd(0x40); //Set VCOM Deselect Level
    OLED_Write_Cmd(0x20); //-Set Page Addressing Mode (0x00/0x01/0x02)
    OLED_Write_Cmd(0x02); //
    OLED_Write_Cmd(0x8d); //--set Charge Pump enable/disable
    OLED_Write_Cmd(0x14); //--set(0x10) disable
    OLED_Write_Cmd(0xa4); // Disable Entire Display On (0xa4/0xa5)
    OLED_Write_Cmd(0xa6); // Disable Inverse Display On (0xa6/a7)
    OLED_Write_Cmd(0xaf); //--turn on oled panel
    OLED_Fill(0x00);      //初始清屏

    OLED_Set_Pointer(0, 0);
}

void OLED_DrawCharacter(unsigned char character, OLED_Point start_point, FontSize font_size)
{
    unsigned char charater_index;
    uint32_t col_index;
    charater_index = character - 32;
    switch (font_size)
    {
    case small:

        if (start_point.x > 126)
        {
            start_point.x = 0;
            start_point.y++;
        }
        OLED_Set_Pointer(start_point.x, start_point.y >> 3);
        for (col_index = 0; col_index < 6; col_index++)
        {
#if USE_IMAGE_MANAGE == 1
            uint8_t page_value = OLED_Get_Page(start_point.x, start_point.y >> 3) | ascii_6x8[charater_index][col_index];
            OLED_Set_Page(page_value, start_point.x, start_point.y >> 3);
            OLED_Write_Data(page_value);
#else
            OLED_Write_Data(ascii_6x8[charater_index][col_index]);
#endif
        }
        break;
    case big:
        // 将字符与字体库中的字对应

        if (start_point.x > 120)
        {
            start_point.x = 0;
            start_point.y += 8;
        }
        OLED_Set_Pointer(start_point.x, start_point.y >> 3);
#if USE_IMAGE_MANAGE == 1
        for (col_index = 0; col_index < 8; col_index++)
        {
            uint8_t page_value = OLED_Get_Page(start_point.x, start_point.y >> 3) | ascii_8X16[charater_index][col_index];
            OLED_Set_Page(page_value, start_point.x, start_point.y >> 3);
            OLED_Write_Data(page_value);
        }
        OLED_Set_Pointer(start_point.x, start_point.y + 8 >> 3);
        for (col_index = 8; col_index < 15; col_index++)
        {
            uint8_t page_value = OLED_Get_Page(start_point.x, start_point.y >> 3) | ascii_8X16[charater_index][col_index];
            OLED_Set_Page(page_value, start_point.x, start_point.y >> 3);
            OLED_Write_Data(page_value);
        }
#else
        for (col_index = 0; col_index < 8; col_index++)
        {
            OLED_Write_Data(ascii_8X16[charater_index][col_index]);
        }
        OLED_Set_Pointer(start_point.x, start_point.y + 8 >> 3);
        for (col_index = 8; col_index < 15; col_index++)
        {
            OLED_Write_Data(ascii_8X16[charater_index][col_index]);
        }
#endif

        break;
    default:
        break;
    }
}

void OLED_DrawString(const unsigned char str[], OLED_Point start_point, FontSize font_size)
{
    uint32_t index = 0, col_index;
    unsigned char charater_index;
    switch (font_size)
    {
    case small:
        while (str[index] != '\0')
        {
            // 将字符与字体库中的字对应
            charater_index = str[index] - 32;
            if (start_point.x > 126)
            {
                start_point.x = 0;
                start_point.y += 8;
            }
            OLED_Set_Pointer(start_point.x, start_point.y >> 3);
            for (col_index = 0; col_index < 6; col_index++)
            {
#if USE_IMAGE_MANAGE == 1
                uint8_t page_value = OLED_Get_Page(start_point.x, start_point.y >> 3) | ascii_6x8[charater_index][col_index];
                OLED_Set_Page(page_value, start_point.x, start_point.y >> 3);
                OLED_Write_Data(page_value);
#else
                OLED_Write_Data(ascii_6x8[charater_index][col_index]);
#endif
            }
            start_point.x += 6;
            index++;
        }

        break;
    case big:
        while (str[index] != '\0')
        {
            // 将字符与字体库中的字对应
            charater_index = str[index] - 32;
            if (start_point.x > 120)
            {
                start_point.x = 0;
                start_point.y += 8;
            }
            OLED_Set_Pointer(start_point.x, start_point.y >> 3);
#if USE_IMAGE_MANAGE == 1
            for (col_index = 0; col_index < 8; col_index++)
            {
                uint8_t page_value = OLED_Get_Page(start_point.x, start_point.y >> 3) | ascii_8X16[charater_index][col_index];
                OLED_Set_Page(page_value, start_point.x, start_point.y >> 3);
                OLED_Write_Data(page_value);
            }
            OLED_Set_Pointer(start_point.x, start_point.y + 8 >> 3);
            for (col_index = 8; col_index < 15; col_index++)
            {
                uint8_t page_value = OLED_Get_Page(start_point.x, start_point.y >> 3) | ascii_8X16[charater_index][col_index];
                OLED_Set_Page(page_value, start_point.x, start_point.y >> 3);
                OLED_Write_Data(page_value);
            }
#else
            for (col_index = 0; col_index < 8; col_index++)
            {
                OLED_Write_Data(ascii_8X16[charater_index][col_index]);
            }
            OLED_Set_Pointer(start_point.x, start_point.y + 8 >> 3);
            for (col_index = 8; col_index < 15; col_index++)
            {
                OLED_Write_Data(ascii_8X16[charater_index][col_index]);
            }
#endif
            start_point.x += 8;
            index++;
        }

        break;
    default:
        break;
    }
}

#if USE_IMAGE_MANAGE == 1
void OLED_DrawPoint(OLED_Point point)
{
    uint8_t value;
    OLED_Set_Pointer(point.x, point.y >> 3);
    value = OLED_Set_Value(1, point.x, point.y);
    OLED_Write_Data(value);
}

void OLED_DrawLine(OLED_Point point1, OLED_Point point2)
{
    OLED_Point point;
    point.x = point1.x;
    point.y = point.y;
    uint16_t __x = point1.x >= point2.x ? (point1.x - point2.x) : (point2.x - point1.x);
    uint16_t __y = point1.y >= point2.y ? (point1.y - point2.y) : (point2.y - point1.y);
    uint8_t value = 0x01, temp = 0x00;
    if (__x == 0)
    {
    }
    else if (__y == 0)
    {
    }
    else
    {
    }
}

#endif
